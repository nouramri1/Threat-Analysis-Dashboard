#map, .map-canvas { flex: 1 1 auto; height: 100%; min-height: 0; margin: 0; padding: 0; }
.leaflet-container { background: transparent !important; }
/* Consolidated dark theme variables and clean styles */
:root {
:root {
  --bg: #181a20;
  --sidebar: #11131a;
  --accent: #0ea5a4;
  --card: #23262f;
  --muted: #a1a1aa;
  --text: #e5e7eb;
  --danger: #ef4444;
  --warning: #f97316;
  --success: #22c55e;
}

html, body { height: 100%; }
body { background: var(--bg); color: var(--text); font-family: Inter, system-ui, Arial, sans-serif; margin:0; }
.navbar { box-shadow: 0 1px 0 rgba(0,0,0,0.12); background: var(--sidebar) !important; }

/* Page theme variants */
body.page-alerts { background: #151822; }
body.page-stats { background: #141616; }
body.page-map { background: #101317; }

.app-container { display:flex; min-height: calc(100vh - 56px); }
.sidebar { width: 220px; min-height: calc(100vh - 56px); }
.main-content { flex:1; background: transparent; }

.card { border-radius: 10px; box-shadow: 0 4px 12px rgba(2,6,23,0.06); background: var(--card); }
#alertsContainer { overflow: visible; }

/* KPI cards: high contrast numbers on dark card */
.kpi-card { background: var(--card); border-radius: 8px; padding: 12px; box-shadow: 0 6px 12px rgba(2,6,23,0.08); }
.kpi-value { color: #f0f3f8; font-size: 22px; font-weight: 800; letter-spacing: 0.2px; }
.kpi-label { color: #cbd5e1; font-size: 12px; font-weight: 600; }

/* Map control button tweaks */
.btn-map-control { min-width: 110px; }

/* Alerts rows */
.alert-row { display:flex; gap:8px; padding:8px; border-bottom:1px solid #23262f; align-items:center; background: rgba(14,165,164,0.06); }
.alert-row .ip { font-weight:600;}
.alert-row .sig { color: #172638; font-size:13px; }
.badge-susp { background: var(--warning); color:#5d1010; padding:3px 6px; border-radius:6px; font-size:12px; }
.badge-block { background: var(--danger); color:#fff; padding:3px 6px; border-radius:6px; font-size:12px; }

/* Sidebar nav: distinct hover/active states */
.sidebar .nav-link { border-radius: 6px; color: var(--muted); transition: background-color .15s ease, color .15s ease; }
.sidebar .nav-link:hover { background-color: rgba(14,165,164,0.12); color: var(--text); }
.sidebar .nav-link.active { background-color: var(--accent); color: #052a2a; font-weight: 700; }
.nav-link i { margin-right: 8px; }

.tab-content {
  min-height: calc(100vh - 120px);
}

.tab-pane {
  animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Stats page specific styles */
.alert-row { display:flex; gap:8px; padding:8px; border-bottom:1px solid #23262f; align-items:center; }

.table-hover tbody tr:hover {
  background-color: rgba(14, 165, 164, 0.10);
}

/* Distinct hover colors per page */
body.page-alerts .table-hover tbody tr:hover { background-color: rgba(255, 99, 132, 0.12); }
body.page-stats .table-hover tbody tr:hover { background-color: rgba(56, 189, 248, 0.12); }
body.page-map .table-hover tbody tr:hover { background-color: rgba(34, 197, 94, 0.12); }

/* Enhanced alerts table: darker text for readability */
#alertsContainer .table { font-size: 0.95rem; }
.table thead th { color: #e5e7eb; background: var(--card); padding-top: 0.5rem; padding-bottom: 0.5rem; }
.table tbody td { color: #000000; padding-top: 0.5rem; padding-bottom: 0.5rem; }
#alertsContainer .badge { font-size: 0.75rem; }

/* Darker styling for Source IP column */
.table thead th.ip-col { background: #1a1d25; color: #f0f3f8; }
.table tbody td.ip-col { background: #0f1218; color: #d0d4dc; }

/* Chart containers */
canvas {
  max-height: 300px;
}

/* Icon spacing */
.nav-link i {
  margin-right: 8px;
}

/* Map bubble labels */
.count-label {
  pointer-events: none;
}

.bubble-count {
  background: rgba(0, 0, 0, 0.85);
  color: white;
  padding: 4px 8px;
  border-radius: 14px;
  font-size: 20px; /* Increase number size on bubbles */
  font-weight: 700;
  text-align: center;
  white-space: nowrap;
  min-width: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: -10px 0 0 -10px;
  border: 1px solid rgba(255, 255, 255, 0);
}

/* Breadcrumb navigation */
.breadcrumb-link {
  color: var(--accent) !important;
  transition: all 0.2s ease;
}

.breadcrumb-link:hover {
  color: #0891b2 !important;
  text-decoration: underline !important;
}

/* Breadcrumb formatting tweaks */
#breadcrumb { font-size: 12px; }
#breadcrumb .crumb-sep { color: #6b728000; margin: 0 6px; }
#breadcrumb .crumb-current { font-weight: 700; color: var(--text); }

/* Drill status banner */
#drillStatus {
  position: sticky;
  top: 0;
  z-index: 5;
  background: rgba(17, 19, 26, 0.75);
  backdrop-filter: saturate(120%) blur(6px);
  color: var(--text);
  padding: 6px 10px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
  font-size: 12px;
}

/* Hide drill status on Alert Analysis page */
body.page-alerts #drillStatus { display: none; }

/* Responsive adjustments */
@media (max-width: 768px) {
  .sidebar {
    width: 100%;
    min-height: auto;
  }
  
  .app-container {
    flex-direction: column;
  }
  
  .main-content {
    padding: 1rem;
  }
}

/* Dark theme overrides for clarity */
.kpi-card { background: var(--card); color: #f5f5f5; }
.kpi-value { color: #ffffff; font-size: 22px; }
.kpi-label { color: #cbd5e1; }

#alertsContainer { max-height: none; }

/* Map card and canvas sizing to avoid gaps */
.map-card { display: flex; flex-direction: column; }
.map-card .card-body { flex: 1 1 auto; display: flex; flex-direction: column; padding: 0; }
.map-container { flex: 1 1 auto; height: 100%; overflow: hidden; }
#map, .map-canvas { flex: 1 1 auto; height: 100%; min-height: 0; margin: 0; padding: 0; }

/* Stretch alerts card to fill column and align bottoms */
.alerts-card { display: flex; flex-direction: column; }
.alerts-card .card-body { flex: 1 1 auto; display: flex; }
#alertsContainer { flex: 1 1 auto; height: auto; min-height: 0; }

/* Map card and canvas sizing to avoid gaps */
.map-card { display: flex; flex-direction: column; }
.map-card .card-body { flex: 1 1 auto; display: flex; flex-direction: column; }
.map-canvas { flex: 1 1 auto; min-height: 60vh; }

/* Raw JSON blocks (in case inline styles are overridden) */
pre.code-dark { background: #11131a; color: #e5e7eb; }
}

/* ===== Layout tightening to reduce excess whitespace ===== */
.card-body.p-0 { padding: 0 !important; }
.card.h-100 { display: flex; }
.card.h-100 .card-body { flex: 1 1 auto; }
.table { margin-bottom: 0; }
#alertsContainer { padding-bottom: 0; }
.pagination-footer { margin-top: 0.25rem; }

/* Compact table rows for better density */
.table.table-hover.table-sm tbody tr td { padding-top: 0.35rem; padding-bottom: 0.35rem; }
.table thead th { padding-top: 0.4rem; padding-bottom: 0.4rem; }

/* Map status banner spacing */
#drillStatus { padding: 4px 8px; font-size: 0.9rem; }